# Octoprint dashboard
title: Octoprint dashboard
icon: mdi:printer-3d
panel: true
path: octo-pi
background: "right/auto linear-gradient(23deg, rgba(211,211,211,1) 0%, rgba(223,223,223,1) 34%, rgba(255,255,255,1) 100%)"

cards:  
  - type: vertical-stack
    cards:
      - type: custom:layout-card
        layout: vertical
        cards:
          - type: vertical-stack
            cards:
              - type: entities
                title: 3D printer state
                show_header_toggle: false
                entities:
                  - entity: sensor.octoprint_current_state
                    icon: mdi:printer-3d
                  - entity: binary_sensor.octoprint_printing
                    icon: mdi:printer-3d-nozzle
                  - entity: binary_sensor.octoprint_printing_error
                    icon: mdi:printer-3d-nozzle-alert
                  - entity: device_tracker.octopi
              - type: picture-glance
                title: Octoprint
                entities: 
                  - camera.octoprint
                camera_image: camera.octoprint

          #######
          - type: custom:layout-break
          #######

          - type: vertical-stack
            cards:
              - type: custom:bar-card
                title: Print progress
                show_header_toggle: false
                entity: sensor.octoprint_job_percentage 
                color: "green"
              - type: entities
                show_header_toggle: false
                entities:
                  - entity: sensor.octoprint_current_filename                  
                    icon: mdi:rename-box
                  - entity: sensor.octoprint_start_time
                  - entity: sensor.octoprint_estimated_finish_time
              - type: conditional
                conditions:
                  - entity: binary_sensor.octoprint_printing
                    state: "on"
                card:
                  type: picture-glance
                  title: Octoprint
                  entities: []
                  camera_image: camera.octoprint_preview
              - type: entities
                entities:
                - entity: switch.attic_3d_printer
                  name: Printer on/off
                - entity: sensor.attic_3d_printer_power
                  name: Printer power



          #######
          - type: custom:layout-break
          #######

          # Tool temperature
          - type: custom:apexcharts-card
            locale: 'nl'
            header:
              title: Tool temperature
              show: true
              show_states: true
              colorize_states: true
            experimental:
              brush: true 
            graph_span: 2h 
            brush:
              selection_span: 2h
            apex_config:
              yaxis:
                forceNiceScale: true
                # min: 0
                # max: 4
            series:
              # Tool
              - entity: sensor.octoprint_actual_tool0_temp
                name: Current nozzle temp
                color: red
                opacity: 0.1
                type: area
                stroke_width: 1
                show:
                  name_in_header: true
              - entity: sensor.octoprint_target_tool0_temp
                name: Target nozzle temp
                color: orange
                opacity: 0.1
                type: area
                stroke_width: 1
                show:
                  name_in_header: true      

          # Bed temperature
          - type: custom:apexcharts-card
            locale: 'nl'
            header:
              title: Bed temperature
              show: true
              show_states: true
              colorize_states: true
            experimental:
              brush: true 
            graph_span: 2h 
            brush:
              selection_span: 2h
            apex_config:
              yaxis:
                forceNiceScale: true
                # min: 0
                # max: 4
            series:
              # Bed
              - entity: sensor.octoprint_actual_bed_temp
                name: Current bed temp
                color: blue
                opacity: 0.1
                type: area
                stroke_width: 1
                show:
                  name_in_header: true
              - entity: sensor.octoprint_target_bed_temp
                name: Target bed temp
                color: purple
                opacity: 0.1
                type: area
                stroke_width: 1
                show:
                  name_in_header: true                           

